# ğŸ“‹ ESTRUTURA COMPLETA: COORDENADOR vs PROFESSOR

## ğŸ¯ HIERARQUIA DE PERMISSÃ•ES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     COORDENADOR                         â”‚
â”‚                  (Acesso Total)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Criar/Editar/Deletar TURMAS                          â”‚
â”‚ âœ… Adicionar/Remover ALUNOS nas turmas                  â”‚
â”‚ âœ… Convidar/Gerenciar PROFESSORES                       â”‚
â”‚ âœ… Atribuir PROFESSORES Ã s turmas                       â”‚
â”‚ âœ… Ver TODOS os alunos                                  â”‚
â”‚ âœ… Ver TODOS os pais                                    â”‚
â”‚ âœ… Gerenciar relacionamento Pai-Filho                   â”‚
â”‚ âœ… Ver relatÃ³rios gerais                                â”‚
â”‚ âœ… Configurar escola                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PROFESSOR                          â”‚
â”‚              (Acesso Limitado Ã s suas turmas)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Ver SUAS turmas                                      â”‚
â”‚ âœ… Adicionar/Remover ALUNOS nas SUAS turmas             â”‚
â”‚ âœ… Ver ALUNOS das SUAS turmas                           â”‚
â”‚ âœ… Criar/Editar ATIVIDADES nas SUAS turmas              â”‚
â”‚ âœ… LanÃ§ar NOTAS dos SEUS alunos                         â”‚
â”‚ âœ… Ver relatÃ³rios das SUAS turmas                       â”‚
â”‚ âŒ NÃƒO pode criar turmas                                â”‚
â”‚ âŒ NÃƒO pode deletar turmas                              â”‚
â”‚ âŒ NÃƒO pode convidar outros professores                 â”‚
â”‚ âŒ NÃƒO pode ver alunos de outras turmas                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š COMPARATIVO DETALHADO

| Funcionalidade | Coordenador | Professor |
|----------------|-------------|-----------|
| **TURMAS** | | |
| Criar turma | âœ… Sim | âŒ NÃ£o |
| Editar turma | âœ… Todas | âœ… Apenas suas |
| Deletar turma | âœ… Todas | âŒ NÃ£o |
| Ver turmas | âœ… Todas | âœ… Apenas suas |
| **ALUNOS** | | |
| Ver alunos | âœ… Todos | âœ… Apenas de suas turmas |
| Adicionar aluno na turma | âœ… Em qualquer turma | âœ… Apenas em suas turmas |
| Remover aluno da turma | âœ… De qualquer turma | âœ… Apenas de suas turmas |
| Editar dados do aluno | âœ… Qualquer aluno | âŒ NÃ£o |
| **PROFESSORES** | | |
| Ver professores | âœ… Todos | âŒ NÃ£o |
| Convidar professor | âœ… Sim | âŒ NÃ£o |
| Atribuir professor Ã  turma | âœ… Sim | âŒ NÃ£o |
| Remover professor da turma | âœ… Sim | âŒ NÃ£o |
| **PAIS** | | |
| Ver pais | âœ… Todos | âœ… Apenas pais de seus alunos |
| Vincular pai a aluno | âœ… Sim | âŒ NÃ£o |
| **ATIVIDADES** | | |
| Criar atividade | âœ… Em qualquer turma | âœ… Apenas em suas turmas |
| Editar atividade | âœ… Qualquer | âœ… Apenas suas |
| Deletar atividade | âœ… Qualquer | âœ… Apenas suas |
| **NOTAS** | | |
| LanÃ§ar notas | âœ… Qualquer aluno | âœ… Apenas seus alunos |
| Editar notas | âœ… Qualquer | âœ… Apenas suas |
| Ver notas | âœ… Todas | âœ… Apenas de seus alunos |
| **RELATÃ“RIOS** | | |
| RelatÃ³rio geral da escola | âœ… Sim | âŒ NÃ£o |
| RelatÃ³rio por turma | âœ… Todas | âœ… Apenas suas |
| RelatÃ³rio por aluno | âœ… Todos | âœ… Apenas seus |

---

## ğŸ¨ PORTAL DO COORDENADOR

### Abas Principais:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“š Turmas  â”‚  ğŸ‘¨â€ğŸ« Professores  â”‚  ğŸ“ Alunos  â”‚  ğŸ‘ª Pais  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“š ABA TURMAS
**Funcionalidades:**
- âœ… **Criar Nova Turma**
  - Nome da turma
  - SÃ©rie (1Âª a 9Âª)
  - MatÃ©ria (opcional)
  - Escola
  - DescriÃ§Ã£o
  
- âœ… **Editar Turma**
  - Alterar qualquer informaÃ§Ã£o
  
- âœ… **Deletar Turma**
  - Remover turma (com confirmaÃ§Ã£o)
  
- âœ… **Atribuir Professores**
  - Adicionar professor Ã  turma
  - Definir professor principal
  - Remover professor da turma
  
- âœ… **Gerenciar Alunos da Turma**
  - Ver lista de alunos
  - Adicionar alunos
  - Remover alunos

### ğŸ‘¨â€ğŸ« ABA PROFESSORES
**Funcionalidades:**
- âœ… **Ver Todos os Professores**
  - Lista completa
  - InformaÃ§Ãµes de contato
  
- âœ… **Convidar Professor**
  - Enviar convite por email
  - Gerar link de cadastro
  
- âœ… **Remover Professor**
  - Desativar acesso

### ğŸ“ ABA ALUNOS
**Funcionalidades:**
- âœ… **Ver Todos os Alunos**
  - Lista completa
  - Busca por nome/email/escola
  - Filtro por sÃ©rie
  
- âœ… **Adicionar Aluno em Turma**
  - Selecionar aluno
  - Selecionar turma
  - Matricular
  
- âœ… **Ver Detalhes do Aluno**
  - Turmas matriculadas
  - Notas
  - Pais vinculados

### ğŸ‘ª ABA PAIS
**Funcionalidades:**
- âœ… **Ver Todos os Pais**
  - Lista completa
  - InformaÃ§Ãµes de contato
  
- âœ… **Vincular Pai a Aluno**
  - Selecionar pai
  - Selecionar filho(s)
  - Criar vÃ­nculo

---

## ğŸ¨ PORTAL DO PROFESSOR

### Abas Principais:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“š Minhas Turmas  â”‚  ğŸ“ Meus Alunos  â”‚  ğŸ“ Atividades  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“š ABA MINHAS TURMAS
**Funcionalidades:**
- âœ… **Ver Suas Turmas**
  - Lista de turmas atribuÃ­das
  - InformaÃ§Ãµes da turma
  
- âœ… **Gerenciar Alunos da Turma**
  - Ver lista de alunos
  - Adicionar alunos (da lista geral)
  - Remover alunos
  
- âœ… **Ver Atividades da Turma**
  - Lista de atividades criadas
  
- âŒ **NÃƒO pode:**
  - Criar turma
  - Deletar turma
  - Atribuir outros professores

### ğŸ“ ABA MEUS ALUNOS
**Funcionalidades:**
- âœ… **Ver Alunos de Suas Turmas**
  - Lista filtrada
  - Busca por nome
  
- âœ… **Ver Detalhes do Aluno**
  - Notas nas suas disciplinas
  - Atividades entregues
  - Desempenho
  
- âœ… **LanÃ§ar Notas**
  - Adicionar nota
  - Editar nota
  
- âŒ **NÃƒO pode:**
  - Ver alunos de outras turmas
  - Editar dados pessoais do aluno

### ğŸ“ ABA ATIVIDADES
**Funcionalidades:**
- âœ… **Criar Atividade**
  - TÃ­tulo
  - DescriÃ§Ã£o
  - Data de entrega
  - Turma(s)
  - PontuaÃ§Ã£o
  
- âœ… **Editar Atividade**
  - Apenas suas atividades
  
- âœ… **Deletar Atividade**
  - Apenas suas atividades
  
- âœ… **Corrigir Atividades**
  - Ver entregas
  - Dar nota
  - Feedback

---

## ğŸ—„ï¸ ESTRUTURA DE DADOS

### Tabela: `classrooms` (Turmas)
```sql
- id (UUID)
- name (VARCHAR) - Nome da turma
- grade_level (INTEGER) - SÃ©rie (1-9)
- school (VARCHAR) - Nome da escola
- subject_id (UUID) - MatÃ©ria (FK)
- description (TEXT) - DescriÃ§Ã£o
- created_by (UUID) - Coordenador que criou (FK users)
- created_at (TIMESTAMP)
```

### Tabela: `classroom_teachers` (Professores nas Turmas)
```sql
- id (UUID)
- classroom_id (UUID) - FK classrooms
- teacher_id (UUID) - FK teachers
- is_primary (BOOLEAN) - Professor principal?
- is_active (BOOLEAN) - Ativo?
- assigned_at (TIMESTAMP)
- assigned_by (UUID) - Quem atribuiu (FK users)
```

### Tabela: `classroom_students` (Alunos nas Turmas)
```sql
- id (UUID)
- classroom_id (UUID) - FK classrooms
- student_id (UUID) - FK students
- enrolled_at (TIMESTAMP) - Data de matrÃ­cula
- enrolled_by (UUID) - Quem matriculou (FK users)
- is_active (BOOLEAN) - Ativo?
```

### Tabela: `activities` (Atividades)
```sql
- id (UUID)
- classroom_id (UUID) - FK classrooms
- teacher_id (UUID) - FK teachers (criador)
- title (VARCHAR) - TÃ­tulo
- description (TEXT) - DescriÃ§Ã£o
- due_date (DATE) - Data de entrega
- max_score (INTEGER) - PontuaÃ§Ã£o mÃ¡xima
- created_at (TIMESTAMP)
```

### Tabela: `activity_submissions` (Entregas)
```sql
- id (UUID)
- activity_id (UUID) - FK activities
- student_id (UUID) - FK students
- submission_text (TEXT) - Resposta
- submitted_at (TIMESTAMP)
- score (INTEGER) - Nota
- feedback (TEXT) - Feedback do professor
- graded_at (TIMESTAMP)
- graded_by (UUID) - FK teachers
```

### Tabela: `parent_student_relation` (VÃ­nculo Pai-Filho)
```sql
- id (UUID)
- parent_id (UUID) - FK users (role='parent')
- student_id (UUID) - FK students
- relationship (VARCHAR) - 'pai', 'mÃ£e', 'responsÃ¡vel'
- created_at (TIMESTAMP)
- created_by (UUID) - Quem criou o vÃ­nculo
```

---

## ğŸ” POLÃTICAS RLS (Row Level Security)

### Para COORDENADORES:
```sql
-- Coordenadores veem TUDO
CREATE POLICY "Coordinators see all classrooms"
ON classrooms FOR ALL
USING (
  EXISTS (
    SELECT 1 FROM users 
    WHERE users.id = auth.uid() 
    AND users.role = 'coordinator'
  )
);
```

### Para PROFESSORES:
```sql
-- Professores veem apenas SUAS turmas
CREATE POLICY "Teachers see own classrooms"
ON classrooms FOR SELECT
USING (
  id IN (
    SELECT classroom_id 
    FROM classroom_teachers 
    WHERE teacher_id IN (
      SELECT id FROM teachers WHERE user_id = auth.uid()
    )
    AND is_active = true
  )
);

-- Professores podem adicionar alunos em SUAS turmas
CREATE POLICY "Teachers manage students in own classrooms"
ON classroom_students FOR ALL
USING (
  classroom_id IN (
    SELECT classroom_id 
    FROM classroom_teachers 
    WHERE teacher_id IN (
      SELECT id FROM teachers WHERE user_id = auth.uid()
    )
    AND is_active = true
  )
);
```

---

## ğŸ¯ FLUXO DE TRABALHO

### COORDENADOR:
```
1. Cria turma (ex: "7Âº Ano A - MatemÃ¡tica")
2. Convida professores
3. Atribui professor Ã  turma
4. Adiciona alunos na turma
5. Vincula pais aos alunos
6. Monitora tudo
```

### PROFESSOR:
```
1. Recebe convite do coordenador
2. Ã‰ atribuÃ­do a uma ou mais turmas
3. VÃª suas turmas no portal
4. Adiciona/remove alunos nas suas turmas
5. Cria atividades para suas turmas
6. LanÃ§a notas dos seus alunos
7. VÃª relatÃ³rios das suas turmas
```

---

## ğŸ“± INTERFACE - PRÃ“XIMOS COMPONENTES A CRIAR

### Para COORDENADOR:
- [x] `ManageTeachers.jsx` - Gerenciar professores âœ…
- [x] `ManageStudents.jsx` - Gerenciar alunos âœ…
- [x] `ManageParents.jsx` - Gerenciar pais âœ…
- [ ] `AssignStudentsToClassroom.jsx` - Adicionar alunos em turma
- [ ] `LinkParentToStudent.jsx` - Vincular pai a filho
- [ ] `InviteTeacher.jsx` - Convidar professor

### Para PROFESSOR:
- [ ] `TeacherClassrooms.jsx` - Minhas turmas
- [ ] `TeacherStudents.jsx` - Meus alunos
- [ ] `ManageClassroomStudents.jsx` - Gerenciar alunos da turma
- [ ] `CreateActivity.jsx` - Criar atividade
- [ ] `GradeActivity.jsx` - Corrigir atividade
- [ ] `StudentGrades.jsx` - LanÃ§ar notas

---

## âœ… RESUMO

### COORDENADOR pode:
âœ… Criar/Editar/Deletar turmas
âœ… Adicionar alunos em qualquer turma
âœ… Convidar e gerenciar professores
âœ… Atribuir professores Ã s turmas
âœ… Ver todos os alunos e pais
âœ… Vincular pais a alunos
âœ… Acesso total ao sistema

### PROFESSOR pode:
âœ… Ver suas turmas
âœ… Adicionar/remover alunos nas suas turmas
âœ… Criar atividades para suas turmas
âœ… LanÃ§ar notas dos seus alunos
âœ… Ver relatÃ³rios das suas turmas
âŒ NÃƒO pode criar/deletar turmas
âŒ NÃƒO pode convidar professores
âŒ NÃƒO pode ver alunos de outras turmas

---

**Quer que eu implemente alguma dessas funcionalidades agora?** ğŸš€

Posso comeÃ§ar por:
1. **Adicionar alunos em turmas** (coordenador e professor)
2. **Portal do professor** (com suas turmas e alunos)
3. **Sistema de atividades**
4. **Vincular pais a alunos**

**Qual prefere?** ğŸ¯

